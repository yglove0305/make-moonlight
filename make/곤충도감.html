<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ê³¤ì¶© ì§€ì‹ ë„ê° | Insect Knowledge Encyclopedia</title>
  <meta name="description" content="ëŒ€í•œë¯¼êµ­ì„ í¬í•¨í•œ ë‹¤ì–‘í•œ ì§€ì—­ì˜ ê³¤ì¶©ì„ ë¶„ë¥˜, ê²€ìƒ‰, ë¹„êµí•  ìˆ˜ ìˆëŠ” ì›¹ ê¸°ë°˜ ì§€ì‹ ë„ê°ì…ë‹ˆë‹¤." />
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3E%3Ctext y='24' x='2' font-size='24'%3E%F0%9F%90%9B%3C/text%3E%3C/svg%3E">
  <style>
    :root {
      --bg: #ffffff;
      --fg: #1a1a1a;
      --muted: #6b7280;
      --primary: #2563eb;
      --primary-contrast: #ffffff;
      --surface: #f3f4f6;
      --border: #e5e7eb;
      --accent: #10b981;
      --card-bg: #ffffff;
      --danger: #ef4444;
      --warn: #f59e0b;
      --ok: #10b981;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0b0f14;
        --fg: #e5e7eb;
        --muted: #9ca3af;
        --primary: #60a5fa;
        --primary-contrast: #0b0f14;
        --surface: #0f141b;
        --border: #1f2937;
        --accent: #34d399;
        --card-bg: #0f141b;
      }
    }
    [data-theme="dark"] {
      --bg: #0b0f14;
      --fg: #e5e7eb;
      --muted: #9ca3af;
      --primary: #60a5fa;
      --primary-contrast: #0b0f14;
      --surface: #0f141b;
      --border: #1f2937;
      --accent: #34d399;
      --card-bg: #0f141b;
    }

    /* Reset */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
      background: var(--bg);
      color: var(--fg);
      line-height: 1.6;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    a { color: var(--primary); text-decoration: none; }
    a:hover { text-decoration: underline; }
    h1, h2, h3 { line-height: 1.25; margin: 0 0 .5rem; }
    h4, h5, h6 { margin: .25rem 0; }
    img { max-width: 100%; height: auto; border-radius: .5rem; }
    button { cursor: pointer; }

    /* Layout */
    .container {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 1.25rem;
      max-width: 1280px;
      margin: 0 auto;
      padding: 1rem;
    }
    header {
      border-bottom: 1px solid var(--border);
      background: var(--surface);
      position: sticky;
      top: 0;
      z-index: 10;
    }
    .header-inner {
      max-width: 1280px;
      margin: 0 auto;
      padding: .75rem 1rem;
      display: grid;
      grid-template-columns: 1fr auto auto;
      align-items: center;
      gap: .75rem;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: .75rem;
    }
    .brand-icon {
      width: 40px; height: 40px; border-radius: 10px;
      display: grid; place-items: center;
      background: radial-gradient(80% 80% at 20% 20%, #22c55e 0%, #16a34a 30%, #065f46 100%);
      color: #fff; font-size: 22px;
      box-shadow: 0 8px 24px rgba(34,197,94,.3);
    }
    .brand h1 { font-size: 1.25rem; margin: 0; }
    .brand small { color: var(--muted); display: block; }

    /* Controls */
    .controls {
      display: flex; gap: .5rem; align-items: center;
    }
    .searchbar {
      display: flex; align-items: center; gap: .5rem;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: .75rem; padding: .5rem .75rem;
      width: 100%;
    }
    .searchbar input {
      flex: 1; border: none; outline: none;
      background: transparent; color: var(--fg);
      font-size: .95rem;
    }
    .chip {
      display: inline-flex; align-items: center;
      gap: .35rem; padding: .25rem .5rem;
      border-radius: 999px; border: 1px solid var(--border);
      background: var(--surface); color: var(--muted); font-size: .85rem;
    }
    .btn {
      padding: .5rem .75rem; border-radius: .5rem;
      border: 1px solid var(--border);
      background: var(--card-bg); color: var(--fg);
    }
    .btn.primary {
      background: var(--primary);
      border-color: transparent;
      color: var(--primary-contrast);
    }
    .btn.ghost {
      background: transparent;
      border-color: var(--border);
    }
    .toggle {
      display: inline-flex; gap: .5rem; align-items: center;
      border: 1px solid var(--border); border-radius: 999px;
      padding: .25rem .5rem; color: var(--muted);
    }

    /* Sidebar */
    aside {
      border: 1px solid var(--border);
      background: var(--card-bg);
      border-radius: .75rem;
      padding: .75rem;
      position: sticky;
      top: 84px;
      height: calc(100vh - 96px);
      overflow: auto;
    }
    .filter-group {
      margin-bottom: 1rem;
      padding-bottom: .75rem;
      border-bottom: 1px dashed var(--border);
    }
    .filter-group:last-child { border-bottom: none; }
    .filter-title { font-weight: 600; margin-bottom: .5rem; }
    .filter-list { display: flex; flex-wrap: wrap; gap: .5rem; }
    .filter-list .chip { user-select: none; }
    .filter-list .chip.active {
      background: var(--accent);
      color: #05323b;
      border-color: transparent;
      font-weight: 600;
    }
    .range { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: .5rem; }
    .range input { width: 100%; }
    .small-muted { color: var(--muted); font-size: .85rem; }

    /* Main grid */
    main {
      display: grid; gap: 1rem;
      grid-template-rows: auto auto 1fr;
    }
    .section {
      border: 1px solid var(--border);
      background: var(--card-bg);
      border-radius: .75rem;
      padding: .75rem;
    }
    .section-title {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: .5rem;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: .75rem;
    }
    @media (max-width: 1024px) {
      .container { grid-template-columns: 1fr; }
      aside { position: static; height: auto; }
      .grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
    @media (max-width: 640px) {
      .grid { grid-template-columns: 1fr; }
      .header-inner { grid-template-columns: 1fr; }
    }

    /* Cards */
    .card {
      border: 1px solid var(--border);
      background: var(--card-bg);
      border-radius: .75rem;
      overflow: hidden;
      display: grid; grid-template-rows: auto auto 1fr auto;
    }
    .card-header {
      display: grid; grid-template-columns: 60px 1fr auto; gap: .5rem;
      align-items: center; padding: .5rem .75rem;
      border-bottom: 1px dashed var(--border);
      background: linear-gradient(180deg, var(--surface), transparent);
    }
    .emoji {
      width: 60px; height: 60px; border-radius: .5rem;
      display: grid; place-items: center;
      font-size: 32px;
      background: radial-gradient(90% 90% at 20% 20%, #fde68a 0%, #fbbf24 35%, #f59e0b 100%);
    }
    .title {
      display: flex; flex-direction: column;
    }
    .title h3 { margin: 0; }
    .title small { color: var(--muted); }
    .status {
      display: inline-flex; align-items: center; gap: .25rem;
      padding: .25rem .5rem; border-radius: .5rem; font-size: .8rem;
      border: 1px solid var(--border); background: var(--surface); color: var(--muted);
    }
    .status.ok { color: var(--ok); border-color: var(--ok + 10%); }
    .status.warn { color: var(--warn); }
    .status.danger { color: var(--danger); }

    .card-body {
      padding: .75rem;
      display: grid; gap: .5rem;
    }
    .meta {
      display: grid; grid-template-columns: 1fr 1fr; gap: .5rem;
    }
    .meta-item {
      display: flex; gap: .5rem; align-items: baseline;
      border: 1px dashed var(--border); border-radius: .5rem;
      padding: .5rem;
    }
    .meta-item b { color: var(--muted); font-weight: 600; width: 90px; flex-shrink: 0; }
    .tags { display: flex; flex-wrap: wrap; gap: .35rem; }
    .tag {
      font-size: .8rem; padding: .25rem .45rem; border-radius: 999px;
      background: var(--surface); border: 1px solid var(--border);
    }
    .card-footer {
      padding: .5rem .75rem; border-top: 1px dashed var(--border);
      display: flex; justify-content: space-between; align-items: center;
    }
    .actions { display: flex; gap: .5rem; }
    .like-btn[data-liked="true"] { color: var(--danger); }

    /* Modal */
    .modal-backdrop {
      position: fixed; inset: 0; background: rgba(0,0,0,.4);
      display: none; align-items: center; justify-content: center; z-index: 100;
    }
    .modal {
      width: min(760px, 92vw);
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: .75rem;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
    }
    .modal-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: .75rem 1rem; border-bottom: 1px solid var(--border);
      background: var(--surface);
    }
    .modal-body { padding: 1rem; display: grid; gap: .75rem; }
    .detail-grid { display: grid; grid-template-columns: 1fr 1fr; gap: .75rem; }
    @media (max-width: 640px) { .detail-grid { grid-template-columns: 1fr; } }
    .detail-section { border: 1px dashed var(--border); border-radius: .5rem; padding: .75rem; }
    .close-x { font-size: 1.25rem; }

    /* Footer */
    footer {
      margin-top: 1rem; padding: 1rem;
      border-top: 1px solid var(--border);
      color: var(--muted);
      text-align: center;
    }

    /* Utility */
    .visually-hidden {
      position: absolute !important;
      height: 1px; width: 1px;
      overflow: hidden; clip: rect(1px, 1px, 1px, 1px);
      white-space: nowrap;
    }
    .pill { border-radius: 999px; padding: .15rem .5rem; }
    .pill.green { background: rgba(16,185,129,.12); color: var(--ok); border: 1px solid rgba(16,185,129,.25); }
    .pill.orange { background: rgba(245,158,11,.12); color: var(--warn); border: 1px solid rgba(245,158,11,.25); }
    .pill.red { background: rgba(239,68,68,.12); color: var(--danger); border: 1px solid rgba(239,68,68,.25); }
  </style>
</head>
<body>
  <header role="banner" aria-label="ì‚¬ì´íŠ¸ í—¤ë”">
    <div class="header-inner">
      <div class="brand">
        <div class="brand-icon" aria-hidden="true">ğŸ›</div>
        <div>
          <h1>ê³¤ì¶© ì§€ì‹ ë„ê°</h1>
          <small>ê²€ìƒ‰Â·ë¶„ë¥˜Â·ë¹„êµë¡œ ë°°ìš°ëŠ” ìì—° ë„ê°</small>
        </div>
      </div>
      <div class="searchbar" role="search">
        <span aria-hidden="true">ğŸ”</span>
        <label for="search" class="visually-hidden">ê³¤ì¶© ê²€ìƒ‰</label>
        <input id="search" type="search" placeholder="ì´ë¦„, í•™ëª…, ë¶„ë¥˜(ë‚˜ë¹„ëª©), ì„œì‹ì§€(ë…¼Â·ì‚°ì§€), íŠ¹ì§•(ì™„ì „ë³€íƒœ) ë“±ìœ¼ë¡œ ê²€ìƒ‰â€¦" autocomplete="off" />
        <button class="btn ghost" id="clearSearch" aria-label="ê²€ìƒ‰ ì§€ìš°ê¸°">ì§€ìš°ê¸°</button>
      </div>
      <div class="controls">
        <button class="btn" id="randomBtn" aria-label="ë¬´ì‘ìœ„ ê³¤ì¶© ë³´ê¸°">ğŸ² ë¬´ì‘ìœ„</button>
        <button class="btn primary" id="exportBtn" aria-label="í•„í„° ê²°ê³¼ ë‚´ë³´ë‚´ê¸°">â¤´ï¸ ë‚´ë³´ë‚´ê¸°</button>
        <div class="toggle" id="themeToggle" role="switch" aria-checked="false" tabindex="0">
          <span aria-hidden="true">ğŸŒ—</span>
          <span>ë¼ì´íŠ¸/ë‹¤í¬</span>
        </div>
      </div>
    </div>
  </header>

  <div class="container" id="layout">
    <aside aria-label="í•„í„° ì‚¬ì´ë“œë°”">
      <div class="filter-group">
        <div class="filter-title">ë¶„ë¥˜(ëª©)</div>
        <div class="filter-list" id="filterOrder">
          <button class="chip" data-filter-order="ë‚˜ë¹„ëª©">ë‚˜ë¹„ëª©</button>
          <button class="chip" data-filter-order="ë”±ì •ë²Œë ˆëª©">ë”±ì •ë²Œë ˆëª©</button>
          <button class="chip" data-filter-order="ë§¤ë¯¸ëª©">ë§¤ë¯¸ëª©</button>
          <button class="chip" data-filter-order="íŒŒë¦¬ëª©">íŒŒë¦¬ëª©</button>
          <button class="chip" data-filter-order="ë²Œëª©">ë²Œëª©</button>
          <button class="chip" data-filter-order="ë©”ëšœê¸°ëª©">ë©”ëšœê¸°ëª©</button>
          <button class="chip" data-filter-order="ë°”í€´ëª©">ë°”í€´ëª©</button>
          <button class="chip" data-filter-order="ì ìë¦¬ëª©">ì ìë¦¬ëª©</button>
          <button class="chip" data-filter-order="ì‚¬ë§ˆê·€ëª©">ì‚¬ë§ˆê·€ëª©</button>
          <button class="chip" data-filter-order="ë…¸ë¦°ì¬ëª©">ë…¸ë¦°ì¬ëª©</button>
        </div>
        <div class="small-muted">ì—¬ëŸ¬ ê°œ ì„ íƒ ê°€ëŠ¥</div>
      </div>

      <div class="filter-group">
        <div class="filter-title">ì„œì‹ì§€</div>
        <div class="filter-list" id="filterHabitat">
          <button class="chip" data-filter-habitat="ì‚°ì§€">ì‚°ì§€</button>
          <button class="chip" data-filter-habitat="ë†ê²½ì§€">ë†ê²½ì§€</button>
          <button class="chip" data-filter-habitat="ë„ì‹¬">ë„ì‹¬</button>
          <button class="chip" data-filter-habitat="ìŠµì§€">ìŠµì§€</button>
          <button class="chip" data-filter-habitat="í•˜ì²œ">í•˜ì²œ</button>
          <button class="chip" data-filter-habitat="í•´ì•ˆ">í•´ì•ˆ</button>
          <button class="chip" data-filter-habitat="ì •ì›">ì •ì›</button>
          <button class="chip" data-filter-habitat="ì´ˆì§€">ì´ˆì§€</button>
        </div>
      </div>

      <div class="filter-group">
        <div class="filter-title">ë¨¹ì´</div>
        <div class="filter-list" id="filterDiet">
          <button class="chip" data-filter-diet="ì´ˆì‹">ì´ˆì‹</button>
          <button class="chip" data-filter-diet="ìœ¡ì‹">ìœ¡ì‹</button>
          <button class="chip" data-filter-diet="ì¡ì‹">ì¡ì‹</button>
          <button class="chip" data-filter-diet="í¡ì¦™">í¡ì¦™</button>
          <button class="chip" data-filter-diet="í¬ì‹ì„±">í¬ì‹ì„±</button>
          <button class="chip" data-filter-diet="ë¶€ì‹ì„±">ë¶€ì‹ì„±</button>
        </div>
      </div>

      <div class="filter-group">
        <div class="filter-title">ëª¸ê¸¸ì´(mm)</div>
        <div class="range">
          <input type="range" id="sizeMin" min="1" max="120" value="1" />
          <span id="sizeMinLabel" class="small-muted">ìµœì†Œ: 1</span>
        </div>
        <div class="range">
          <input type="range" id="sizeMax" min="1" max="120" value="120" />
          <span id="sizeMaxLabel" class="small-muted">ìµœëŒ€: 120</span>
        </div>
      </div>

      <div class="filter-group">
        <div class="filter-title">ë³´ì „ ìƒíƒœ</div>
        <div class="filter-list" id="filterStatus">
          <button class="chip" data-filter-status="ê´€ì‹¬ëŒ€ìƒ">ê´€ì‹¬ëŒ€ìƒ</button>
          <button class="chip" data-filter-status="ì¤€ìœ„í˜‘">ì¤€ìœ„í˜‘</button>
          <button class="chip" data-filter-status="ì·¨ì•½">ì·¨ì•½</button>
          <button class="chip" data-filter-status="ìœ„ê¸°">ìœ„ê¸°</button>
          <button class="chip" data-filter-status="ë¯¸í‰ê°€">ë¯¸í‰ê°€</button>
        </div>
      </div>

      <div class="filter-group">
        <div class="filter-title">ë³€íƒœ ìœ í˜•</div>
        <div class="filter-list" id="filterMetamorphosis">
          <button class="chip" data-filter-meta="ì™„ì „ë³€íƒœ">ì™„ì „ë³€íƒœ</button>
          <button class="chip" data-filter-meta="ë¶ˆì™„ì „ë³€íƒœ">ë¶ˆì™„ì „ë³€íƒœ</button>
        </div>
      </div>

      <div class="filter-group">
        <div class="filter-title">ì •ë ¬</div>
        <div class="filter-list">
          <button class="chip" data-sort="name">ì´ë¦„</button>
          <button class="chip" data-sort="size">ëª¸ê¸¸ì´</button>
          <button class="chip" data-sort="order">ë¶„ë¥˜(ëª©)</button>
          <button class="chip" data-sort="status">ë³´ì „ ìƒíƒœ</button>
        </div>
      </div>

      <div class="filter-group">
        <button class="btn ghost" id="resetFilters">í•„í„° ì´ˆê¸°í™”</button>
      </div>

      <div class="small-muted">
        í•„í„°ì™€ ê²€ìƒ‰ì€ êµì§‘í•©ìœ¼ë¡œ ì ìš©ë©ë‹ˆë‹¤. ê²°ê³¼ê°€ ì—†ìœ¼ë©´ ì¡°ê±´ì„ ì™„í™”í•´ë³´ì„¸ìš”.
      </div>
    </aside>

    <main aria-live="polite">
      <section class="section" aria-label="ìš”ì•½ ì •ë³´">
        <div class="section-title">
          <h2>ìš”ì•½</h2>
          <div class="chips">
            <span class="chip" id="countChip">ì´ 0ì¢…</span>
            <span class="chip" id="activeFiltersChip">í™œì„± í•„í„° 0ê°œ</span>
            <span class="chip" id="likedChip">ì¦ê²¨ì°¾ê¸° 0ê°œ</span>
          </div>
        </div>
        <div class="meta">
          <div class="meta-item">
            <b>ê²€ìƒ‰ì–´</b>
            <span id="queryEcho" class="small-muted">ì—†ìŒ</span>
          </div>
          <div class="meta-item">
            <b>ì •ë ¬</b>
            <span id="sortEcho" class="small-muted">ì´ë¦„</span>
          </div>
        </div>
      </section>

      <section class="section" aria-label="ì•ŒíŒŒë²³ ìƒ‰ì¸">
        <div class="section-title">
          <h2>ìƒ‰ì¸</h2>
          <div class="actions">
            <button class="btn ghost" id="indexPrev">â—€ ì´ì „</button>
            <button class="btn ghost" id="indexNext">ë‹¤ìŒ â–¶</button>
          </div>
        </div>
        <div class="filter-list" id="alphabetIndex">
          <!-- ë™ì  ìƒì„± -->
        </div>
      </section>

      <section class="section" aria-label="ê²°ê³¼ ëª©ë¡">
        <div class="section-title">
          <h2>ê²°ê³¼</h2>
          <div class="small-muted" id="resultHint">í•„í„°ì— ë§ëŠ” ê³¤ì¶©ì´ í‘œì‹œë©ë‹ˆë‹¤.</div>
        </div>
        <div class="grid" id="cardGrid">
          <!-- ì¹´ë“œ ë™ì  ìƒì„± -->
        </div>
      </section>
    </main>
  </div>

  <!-- ìƒì„¸ ëª¨ë‹¬ -->
  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <div class="modal-header">
        <div>
          <h3 id="modalTitle">ìƒì„¸ ì •ë³´</h3>
          <small id="modalSubtitle" class="small-muted">í•™ëª…</small>
        </div>
        <button class="btn ghost close-x" id="modalClose" aria-label="ë‹«ê¸°">âœ•</button>
      </div>
      <div class="modal-body">
        <div class="detail-grid">
          <div class="detail-section">
            <h4>ê¸°ë³¸ ì •ë³´</h4>
            <div class="meta">
              <div class="meta-item">
                <b>ë¶„ë¥˜(ëª©)</b><span id="detailOrder"></span>
              </div>
              <div class="meta-item">
                <b>ë³´ì „ ìƒíƒœ</b><span id="detailStatus"></span>
              </div>
              <div class="meta-item">
                <b>ë³€íƒœ ìœ í˜•</b><span id="detailMeta"></span>
              </div>
              <div class="meta-item">
                <b>ëª¸ê¸¸ì´</b><span id="detailSize"></span>
              </div>
            </div>
          </div>
          <div class="detail-section">
            <h4>ìƒíƒœ</h4>
            <div class="meta">
              <div class="meta-item">
                <b>ì„œì‹ì§€</b><span id="detailHabitat"></span>
              </div>
              <div class="meta-item">
                <b>ë¨¹ì´</b><span id="detailDiet"></span>
              </div>
              <div class="meta-item">
                <b>í™œë™ ì‹œê¸°</b><span id="detailSeason"></span>
              </div>
              <div class="meta-item">
                <b>ë¶„í¬</b><span id="detailRange"></span>
              </div>
            </div>
          </div>
          <div class="detail-section">
            <h4>íŠ¹ì§•</h4>
            <p id="detailNotes" class="small-muted"></p>
            <div class="tags" id="detailTags"></div>
          </div>
          <div class="detail-section">
            <h4>ê´€ì°° íŒ</h4>
            <ul id="detailTips">
              <!-- ë™ì  -->
            </ul>
          </div>
        </div>
      </div>
      <div class="card-footer" style="border-top: 1px solid var(--border);">
        <div class="actions">
          <button class="btn" id="copyLinkBtn">ğŸ”— ë§í¬ ë³µì‚¬</button>
          <button class="btn" id="printBtn">ğŸ–¨ï¸ ì¸ì‡„</button>
        </div>
        <div>
          <button class="btn primary" id="likeInModal">â¤ï¸ ì¦ê²¨ì°¾ê¸°</button>
        </div>
      </div>
    </div>
  </div>

  <footer>
    Â© 2025 ê³¤ì¶© ì§€ì‹ ë„ê°. êµìœ¡Â·ì·¨ë¯¸ ëª©ì ì˜ ê³µê°œ ë°ì´í„° ì˜ˆì‹œ. í˜„ì¥ ê´€ì°° ì‹œ ìƒíƒœë¥¼ ì¡´ì¤‘í•´ì£¼ì„¸ìš”.
  </footer>

  <script>
    // ë°ì´í„° ì •ì˜: í•œêµ­ ë° ì£¼ë³€ ì§€ì—­ì—ì„œ ìì£¼ ì–¸ê¸‰ë˜ëŠ” ëŒ€í‘œ ì˜ˆì‹œ
    const INSECTS = [
      {
        id: "papilio-xuthus",
        emoji: "ğŸ¦‹",
        nameKo: "í˜¸ë‘ë‚˜ë¹„",
        nameEn: "Asian Swallowtail",
        sci: "Papilio xuthus",
        order: "ë‚˜ë¹„ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 80,
        habitat: ["ì‚°ì§€", "ì •ì›", "ë†ê²½ì§€"],
        diet: ["ì´ˆì‹", "í¡ë°€"], // ì• ë²Œë ˆ=ì´ˆì‹, ì„±ì¶©=í¡ë°€
        season: "4â€“9ì›”",
        range: "í•œë°˜ë„ ì „ì—­, ë™ì•„ì‹œì•„",
        notes: "ë‚ ê°œì˜ ë…¸ë€ ë°”íƒ•ê³¼ ê²€ì€ ë¬´ëŠ¬, í›„ìµì˜ ê¼¬ë¦¬ ëª¨ì–‘ì´ íŠ¹ì§•. ì‚°ì´ˆë¥˜ë¥¼ ì„ í˜¸í•˜ëŠ” ì• ë²Œë ˆ.",
        tags: ["ë‚˜ë¹„", "ì ‘í˜•(ì œë¹„ë‚˜ë¹„)", "ë‚ ê°œë¬´ëŠ¬"],
        tips: [
          "ë§‘ì€ ë‚  ë‚® ì‹œê°„ëŒ€ ê½ƒ ì£¼ë³€ ê´€ì°°",
          "ì‚°ì´ˆë‚˜ë¬´(í™©ì¹ , íƒ±ì) ê·¼ì²˜ì— ì• ë²Œë ˆ í”ì  í™•ì¸",
          "ë”°ëœ»í•œ ë‚¨í–¥ ì‚°ë¹„íƒˆì—ì„œ í™œë™ì´ í™œë°œ"
        ]
      },
      {
        id: "graphium-sarpedon",
        emoji: "ğŸ¦‹",
        nameKo: "ì´ˆë¡ì œë¹„ë‚˜ë¹„",
        nameEn: "Common Bluebottle",
        sci: "Graphium sarpedon",
        order: "ë‚˜ë¹„ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 70,
        habitat: ["ì‚°ì§€", "ì •ì›", "í•˜ì²œ"],
        diet: ["í¡ë°€"],
        season: "4â€“10ì›”",
        range: "ë‚¨ë¶€ í•´ì•ˆ, ì œì£¼, ë™ì•„ì‹œì•„",
        notes: "ë‚ ê°œ ì¤‘ì•™ì˜ ì²­ë¡ìƒ‰ ë ê°€ ì—°ì†ì ìœ¼ë¡œ ì´ì–´ì§„ë‹¤. ë¹ ë¥¸ ë¹„í–‰.",
        tags: ["ì œë¹„ë‚˜ë¹„", "ì²­ë¡ ë ", "ë¹ ë¥¸ ë¹„í–‰"],
        tips: [
          "ìŠµí•œ í•˜ì²œë³€ì˜ ë¬¼ì›…ë©ì´ì—ì„œ ë¯¸ë„¤ë„ í¡ìˆ˜ í–‰ë™ ê´€ì°°",
          "ë§‘ì€ ë‚  ë‚˜í’€ê±°ë¦¬ëŠ” ë¹„í–‰ ê²½ë¡œ ì˜ˆì¸¡ ì–´ë ¤ì›€"
        ]
      },
      {
        id: "agrias",
        emoji: "ğŸ¦‹",
        nameKo: "ì œë¹„ë‚˜ë¹„ë¥˜(ì˜ˆì‹œ)",
        nameEn: "Swallowtail Family",
        sci: "Papilionidae sp.",
        order: "ë‚˜ë¹„ëª©",
        status: "ë¯¸í‰ê°€",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 60,
        habitat: ["ì‚°ì§€", "ì •ì›"],
        diet: ["í¡ë°€"],
        season: "5â€“9ì›”",
        range: "ë™ì•„ì‹œì•„",
        notes: "ì œë¹„ë‚˜ë¹„ê³¼ ì „ë°˜ì˜ ì˜ˆì‹œ í•­ëª©.",
        tags: ["ë¶„ë¥˜ ì˜ˆì‹œ"],
        tips: ["ê´€ì°° ê¸°ë¡ìš© ì˜ˆì‹œ"]
      },
      {
        id: "vespa-mandarinia",
        emoji: "ğŸ",
        nameKo: "ì¥ìˆ˜ë§ë²Œ",
        nameEn: "Asian Giant Hornet",
        sci: "Vespa mandarinia",
        order: "ë²Œëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 45,
        habitat: ["ì‚°ì§€", "ì´ˆì§€"],
        diet: ["ìœ¡ì‹", "í¬ì‹ì„±"],
        season: "5â€“10ì›”",
        range: "í•œë°˜ë„ ë‚¨ë¶€, ë™ì•„ì‹œì•„",
        notes: "í° ì²´ê²©ê³¼ ê°•í•œ í„±. ë§ë²Œë¥˜ ì¤‘ ìµœëŒ€ê¸‰.",
        tags: ["ë§ë²Œ", "í¬ì‹", "ê²½ê³„ í•„ìš”"],
        tips: [
          "ìœ„í˜‘í•˜ì§€ ë§ê³  ê±°ë¦¬ë¥¼ ìœ ì§€",
          "ë‘¥ì§€ ì£¼ë³€ ì ‘ê·¼ ê¸ˆì§€",
          "í–¥ê¸°ê°€ ê°•í•œ ìŒì‹ì€ ì•¼ì™¸ì—ì„œ ê°€ë¦¼"
        ]
      },
      {
        id: "apis-cerana",
        emoji: "ğŸ",
        nameKo: "í† ì¢…ê¿€ë²Œ",
        nameEn: "Asian Honey Bee",
        sci: "Apis cerana",
        order: "ë²Œëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 12,
        habitat: ["ë†ê²½ì§€", "ì •ì›", "ì‚°ì§€"],
        diet: ["í¡ë°€"],
        season: "3â€“11ì›”",
        range: "í•œë°˜ë„ ì „ì—­",
        notes: "ê½ƒê°€ë£¨ë°›ì´ í•µì‹¬ ê³¤ì¶©. êµ°ì²´ ìƒí™œ.",
        tags: ["ë²Œëª©", "ê¿€ì±„ì§‘", "ìˆ˜ë¶„ë§¤ê°œ"],
        tips: [
          "ê½ƒì´ í’ë¶€í•œ ì‹œê°„ëŒ€ì— ê´€ì°°",
          "êµ°ì²´ ê·¼ì²˜ì—ì„œëŠ” ì¡°ìš©íˆ ì´ë™"
        ]
      },
      {
        id: "coccinella-septempunctata",
        emoji: "ğŸ",
        nameKo: "ë¬´ë‹¹ë²Œë ˆ(ì¹ ì„±ë¬´ë‹¹ë²Œë ˆ)",
        nameEn: "Seven-spot Ladybird",
        sci: "Coccinella septempunctata",
        order: "ë”±ì •ë²Œë ˆëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 7,
        habitat: ["ë†ê²½ì§€", "ì •ì›", "ì´ˆì§€"],
        diet: ["ìœ¡ì‹", "í¬ì‹ì„±"], // ì§„ë”§ë¬¼ í¬ì‹
        season: "3â€“11ì›”",
        range: "í•œë°˜ë„ ì „ì—­",
        notes: "ë¶‰ì€ ë“±íŒì— ê²€ì€ ì  7ê°œ. ì§„ë”§ë¬¼ ì²œì .",
        tags: ["ì²œì ê³¤ì¶©", "ìƒë¬¼í•™ì ë°©ì œ"],
        tips: [
          "ì‘ë¬¼ ì ë’·ë©´ì—ì„œ ì§„ë”§ë¬¼ê³¼ í•¨ê»˜ íƒìƒ‰",
          "ì´ˆë´„Â·ëŠ¦ê°€ì„ì—ë„ ê´€ì°° ê°€ëŠ¥"
        ]
      },
      {
        id: "dynastes-neptunus",
        emoji: "ğŸª²",
        nameKo: "ì¥ìˆ˜í’ë…ì´(ì˜ˆì‹œ)",
        nameEn: "Rhinoceros Beetle",
        sci: "Trypoxylus dichotomus",
        order: "ë”±ì •ë²Œë ˆëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 40,
        habitat: ["ì‚°ì§€", "ì •ì›"],
        diet: ["ë¶€ì‹ì„±", "í¡ë°€"], // ìœ ì¶©=ë¶€ì‹, ì„±ì¶©=ìˆ˜ì•¡
        season: "6â€“9ì›”",
        range: "í•œë°˜ë„ ë‚¨ë¶€",
        notes: "ìˆ˜ì•¡ì„ ì¢‹ì•„í•˜ê³  ë°¤ì— í™œë™ì .",
        tags: ["í’ë…ì´", "ìˆ˜ì•¡ì„±"],
        tips: [
          "ë°¤ì— ìˆ˜ì•¡ë‚˜ë¬´ ì£¼ë³€ í™•ì¸",
          "ë¹›ì— ëª¨ì—¬ë“œëŠ” ìŠµì„± í™œìš©"
        ]
      },
      {
        id: "vespa-velutina",
        emoji: "ğŸ",
        nameKo: "ë“±ê²€ì€ë§ë²Œ",
        nameEn: "Asian Yellow-legged Hornet",
        sci: "Vespa velutina",
        order: "ë²Œëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 25,
        habitat: ["ë„ì‹¬", "ì •ì›", "ì‚°ì§€"],
        diet: ["ìœ¡ì‹", "í¬ì‹ì„±"],
        season: "5â€“10ì›”",
        range: "í•œë°˜ë„ ì¼ë¶€, ë„ì‹¬ í™•ì‚°",
        notes: "ë“±ì´ ê²€ê³  ë‹¤ë¦¬ ëì´ ë…¸ë€ìƒ‰.",
        tags: ["ë§ë²Œ", "í¬ì‹ì„±", "ë„ì‹¬ í™•ì‚°"],
        tips: [
          "ë„ì‹¬ ê³µì›ì—ì„œë„ ê´€ì°° ê°€ëŠ¥",
          "ê¿€ë²Œ êµ°ì²´ ì£¼ë³€ì—ì„œ ì ì‹œ ë¨¸ë¬¼ëŸ¬ í¬ì‹"
        ]
      },
      {
        id: "heptapotamon",
        emoji: "ğŸª°",
        nameKo: "ì§‘íŒŒë¦¬",
        nameEn: "Housefly",
        sci: "Musca domestica",
        order: "íŒŒë¦¬ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 6,
        habitat: ["ë„ì‹¬", "ë†ê²½ì§€"],
        diet: ["ì¡ì‹"],
        season: "ì—°ì¤‘",
        range: "ì „ì„¸ê³„",
        notes: "ì¸ê°„ ìƒí™œê¶Œì— í”í•¨.",
        tags: ["ìœ„ìƒê³¤ì¶©", "ìƒí™œê¶Œ"],
        tips: [
          "ë”ìš´ ê³„ì ˆì— í™œë™ ì¦ê°€",
          "ì“°ë ˆê¸° ê´€ë¦¬ê°€ ê´€ì°° ë°€ë„ì— ì˜í–¥"
        ]
      },
      {
        id: "aedes-albopictus",
        emoji: "ğŸ¦Ÿ",
        nameKo: "ë¹—ì‚´ë¬´ëŠ¬ëª¨ê¸°",
        nameEn: "Asian Tiger Mosquito",
        sci: "Aedes albopictus",
        order: "íŒŒë¦¬ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 4,
        habitat: ["ë„ì‹¬", "ìŠµì§€"],
        diet: ["í¡í˜ˆ", "í¡ë°€"],
        season: "5â€“10ì›”",
        range: "í•œë°˜ë„ ì „ì—­",
        notes: "ê²€ì€ ëª¸ì— í° ì¤„ë¬´ëŠ¬. ì¸ê·¼ ë¬¼ì›…ë©ì´ ë²ˆì‹.",
        tags: ["ëª¨ê¸°", "ë„ì‹¬", "ìœ„ìƒ"],
        tips: [
          "ê³ ì¸ ë¬¼ ì œê±°ê°€ ê°œì²´ìˆ˜ ê°ì†Œì— íš¨ê³¼",
          "ì´ë¥¸ ì•„ì¹¨Â·í•´ì§ˆë…˜ì— í™œë™"
        ]
      },
      {
        id: "mantis-tenodera",
        emoji: "ğŸ¦—",
        nameKo: "ì™•ì‚¬ë§ˆê·€",
        nameEn: "Chinese Mantis",
        sci: "Tenodera sinensis",
        order: "ì‚¬ë§ˆê·€ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ë¶ˆì™„ì „ë³€íƒœ",
        sizeMm: 80,
        habitat: ["ì´ˆì§€", "ì •ì›"],
        diet: ["ìœ¡ì‹", "í¬ì‹ì„±"],
        season: "6â€“10ì›”",
        range: "í•œë°˜ë„ ì „ì—­",
        notes: "ì‚¼ê°í˜• ë¨¸ë¦¬ì™€ ì§‘ê²Œí˜• ì•ë‹¤ë¦¬ê°€ íŠ¹ì§•.",
        tags: ["í¬ì‹ì", "ìœ„ì¥"],
        tips: [
          "í‚¤ í° í’€ ì‚¬ì´ì—ì„œ ëŒ€ê¸° í¬ì‹",
          "ê°€ì„ì— ë‚œí¬(ë‚œê´´) ê´€ì°° ê°€ëŠ¥"
        ]
      },
      {
        id: "locusta-migratoria",
        emoji: "ğŸ¦—",
        nameKo: "ë©”ëšœê¸°(ì–´ë¦¬ì—°ë‘)",
        nameEn: "Migratory Locust (example)",
        sci: "Locusta migratoria",
        order: "ë©”ëšœê¸°ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ë¶ˆì™„ì „ë³€íƒœ",
        sizeMm: 40,
        habitat: ["ì´ˆì§€", "ë†ê²½ì§€"],
        diet: ["ì´ˆì‹"],
        season: "5â€“10ì›”",
        range: "í•œë°˜ë„",
        notes: "ê°•í•œ ë’·ë‹¤ë¦¬, ì í”„ì™€ ë¹„í–‰.",
        tags: ["ë©”ëšœê¸°", "ì´ˆì‹"],
        tips: [
          "í–‡ë³• ë“œëŠ” ì´ˆì§€ì—ì„œ í™œë™",
          "í’€ ë² ê¸° ì´ì „ ì‹œê¸°ì— ë°€ë„ ë†’ìŒ"
        ]
      },
      {
        id: "periplaneta",
        emoji: "ğŸª³",
        nameKo: "ë°”í€´ë²Œë ˆ(ì˜ˆì‹œ)",
        nameEn: "Cockroach",
        sci: "Periplaneta sp.",
        order: "ë°”í€´ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ë¶ˆì™„ì „ë³€íƒœ",
        sizeMm: 30,
        habitat: ["ë„ì‹¬"],
        diet: ["ì¡ì‹", "ë¶€ì‹ì„±"],
        season: "ì—°ì¤‘",
        range: "ì „ì„¸ê³„",
        notes: "ì•¼í–‰ì„±, ì–´ë‘ìš´ ê³³ ì„ í˜¸.",
        tags: ["ë„ì‹¬", "ì•¼í–‰ì„±"],
        tips: [
          "ì„œì‹ì²˜ëŠ” ìŠµí•˜ê³  ë”°ëœ»í•œ ê³³",
          "ì²­ê²° ìœ ì§€ê°€ ê´€ì°° ë¹ˆë„ì— ì˜í–¥"
        ]
      },
      {
        id: "platycnemis-pennipes",
        emoji: "ğŸ§š",
        nameKo: "ì‹¤ì ìë¦¬(ì˜ˆì‹œ)",
        nameEn: "Damselfly",
        sci: "Coenagrionidae sp.",
        order: "ì ìë¦¬ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ë¶ˆì™„ì „ë³€íƒœ",
        sizeMm: 35,
        habitat: ["í•˜ì²œ", "ìŠµì§€"],
        diet: ["ìœ¡ì‹", "í¬ì‹ì„±"],
        season: "5â€“9ì›”",
        range: "í•œë°˜ë„",
        notes: "ê°€ëŠ˜ê³  ìš°ì•„í•œ ëª¸, í•©ì³ì§„ ë‚ ê°œ.",
        tags: ["ì ìë¦¬", "ìˆ˜ì„œê³¤ì¶©"],
        tips: [
          "ë§‘ì€ ë¬¼ê°€ ì‹ìƒ ì£¼ë³€ ì •ì§€ í¬ì‹ ê´€ì°°",
          "í–‡ì‚´ ì¢‹ì€ ì‹œê°„ëŒ€ í™œë°œ"
        ]
      },
      {
        id: "anisoptera",
        emoji: "ğŸ§š",
        nameKo: "ì ìë¦¬(ì™•ì ìë¦¬ ì˜ˆì‹œ)",
        nameEn: "Dragonfly",
        sci: "Anisoptera sp.",
        order: "ì ìë¦¬ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ë¶ˆì™„ì „ë³€íƒœ",
        sizeMm: 70,
        habitat: ["í•˜ì²œ", "ìŠµì§€"],
        diet: ["ìœ¡ì‹", "í¬ì‹ì„±"],
        season: "5â€“10ì›”",
        range: "í•œë°˜ë„",
        notes: "ê°•í•œ ë¹„í–‰, ìˆ˜ì„œ ìœ ì¶©.",
        tags: ["í¬ì‹ì", "ìˆ˜ì§ˆì§€í‘œ"],
        tips: [
          "í•˜ì²œë³€ ê°œí™œì§€ì—ì„œ ì‚¬ëƒ¥ ë¹„í–‰ ê´€ì°°",
          "í•´ì§ˆë…˜ í™œë™ ì¦ê°€"
        ]
      },
      {
        id: "cicadidae",
        emoji: "ğŸªµ",
        nameKo: "ë§¤ë¯¸(ë§ë§¤ë¯¸ ì˜ˆì‹œ)",
        nameEn: "Cicada",
        sci: "Cicada sp.",
        order: "ë§¤ë¯¸ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ë¶ˆì™„ì „ë³€íƒœ",
        sizeMm: 35,
        habitat: ["ë„ì‹¬", "ì‚°ì§€"],
        diet: ["í¡ì¦™"],
        season: "6â€“9ì›”",
        range: "í•œë°˜ë„",
        notes: "ìš¸ìŒì†Œë¦¬ë¡œ ì¢… êµ¬ë¶„ ê°€ëŠ¥.",
        tags: ["ë§¤ë¯¸", "ì—¬ë¦„"],
        tips: [
          "ë‚˜ë¬´ì¤„ê¸°ì— ì•‰ì•„ í¡ì¦™",
          "ì†Œë¦¬ ë”°ë¼ ìœ„ì¹˜ íŒŒì•…"
        ]
      },
      {
        id: "shield-bug",
        emoji: "ğŸ›¡ï¸",
        nameKo: "ë…¸ë¦°ì¬(ê´‘ëŒ€ë…¸ë¦°ì¬ ì˜ˆì‹œ)",
        nameEn: "Shield Bug",
        sci: "Pentatomidae sp.",
        order: "ë…¸ë¦°ì¬ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ë¶ˆì™„ì „ë³€íƒœ",
        sizeMm: 12,
        habitat: ["ë†ê²½ì§€", "ì •ì›", "ì´ˆì§€"],
        diet: ["í¡ì¦™"],
        season: "4â€“10ì›”",
        range: "í•œë°˜ë„",
        notes: "ë°©íŒ¨ ëª¨ì–‘ì˜ ëª¸ì²´. ì¼ë¶€ëŠ” ëƒ„ìƒˆ ë¶„ë¹„.",
        tags: ["ë…¸ë¦°ì¬", "í¡ì¦™"],
        tips: [
          "ì‘ë¬¼ì—ì„œ í¡ì¦™ í”ì  ê´€ì°°",
          "ì„±ì¶©Â·ì•½ì¶© ê³µì¡´ ì‹œê¸° ì£¼ì˜"
        ]
      },
      {
        id: "firefly",
        emoji: "âœ¨",
        nameKo: "ë°˜ë”§ë¶ˆì´(ì˜ˆì‹œ)",
        nameEn: "Firefly",
        sci: "Lampyridae sp.",
        order: "ë”±ì •ë²Œë ˆëª©",
        status: "ì¤€ìœ„í˜‘",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 10,
        habitat: ["ìŠµì§€", "í•˜ì²œ"],
        diet: ["ìœ¡ì‹"], // ìœ ì¶© í¬ì‹ì„±ì´ ëšœë ·
        season: "6â€“7ì›”",
        range: "í•œë°˜ë„ ì¼ë¶€",
        notes: "ë³µë¶€ ë°œê´‘ ê¸°ê´€. ì²­ì • ìˆ˜ì—­ì— ë§ìŒ.",
        tags: ["ë°œê´‘", "ì²­ì •ì§€í‘œ"],
        tips: [
          "ë¹› ê³µí•´ ì ì€ ì‹œê³¨ í•˜ì²œì—ì„œ ì•¼ê°„ ê´€ì°°",
          "ë¹„ ì˜¨ ë’¤ ìŠµí•œ ë°¤ì— í™œë™ ì¦ê°€"
        ]
      },
      {
        id: "silkworm-moth",
        emoji: "ğŸ¦‹",
        nameKo: "ëˆ„ì—ë‚˜ë°©(ì˜ˆì‹œ)",
        nameEn: "Silkworm Moth",
        sci: "Bombyx mori",
        order: "ë‚˜ë¹„ëª©",
        status: "ì‚¬ìœ¡ì¢…",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 50,
        habitat: ["ì‚¬ìœ¡"],
        diet: ["ì´ˆì‹"], // ì• ë²Œë ˆ: ë½•ì
        season: "ì‚¬ìœ¡ ì‹œê¸°",
        range: "ì „ì„¸ê³„ ì‚¬ìœ¡",
        notes: "ê°€ì¶•í™”ëœ ë‚˜ë°©, ë¹„í–‰ ëŠ¥ë ¥ ì €í•˜.",
        tags: ["ì‚¬ìœ¡", "ëˆ„ì—", "ë¹„ë‹¨"],
        tips: [
          "ì‚¬ìœ¡ í™˜ê²½ ì˜¨ë„Â·ìŠµë„ ìœ ì§€",
          "ë½•ì ì‹ ì„ ë„ ì¤‘ìš”"
        ]
      },
      {
        id: "stag-beetle",
        emoji: "ğŸª²",
        nameKo: "ì‚¬ìŠ´ë²Œë ˆ(ì˜ˆì‹œ)",
        nameEn: "Stag Beetle",
        sci: "Lucanidae sp.",
        order: "ë”±ì •ë²Œë ˆëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 60,
        habitat: ["ì‚°ì§€", "ì •ì›"],
        diet: ["ë¶€ì‹ì„±", "í¡ë°€"],
        season: "6â€“9ì›”",
        range: "í•œë°˜ë„",
        notes: "ìˆ˜ì»· í° í„±. ê·¸ë£¨í„°ê¸° ì£¼ë³€ì— ì„œì‹.",
        tags: ["ë”±ì •ë²Œë ˆ", "ìˆ˜ì•¡"],
        tips: [
          "ë°¤ì— ìˆ˜ì•¡ ë‚˜ë¬´ íƒìƒ‰",
          "ë¡œê·¸í”¼ë”(ì©ì€ ëª©ì¬) ì£¼ë³€ í™•ì¸"
        ]
      },
      {
        id: "praying-mantis",
        emoji: "ğŸ¦—",
        nameKo: "ì¢€ì‚¬ë§ˆê·€(ì˜ˆì‹œ)",
        nameEn: "Mantis",
        sci: "Mantis religiosa",
        order: "ì‚¬ë§ˆê·€ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ë¶ˆì™„ì „ë³€íƒœ",
        sizeMm: 60,
        habitat: ["ì´ˆì§€", "ì •ì›"],
        diet: ["ìœ¡ì‹", "í¬ì‹ì„±"],
        season: "6â€“10ì›”",
        range: "í•œë°˜ë„",
        notes: "ë‘ ì•ë‹¤ë¦¬ë¡œ ë¨¹ì´ í¬íš.",
        tags: ["ì‚¬ë§ˆê·€", "í¬ì‹"],
        tips: [
          "ê°œí™œì§€ì—ì„œ ì›€ì§ì„ ìµœì†Œí™” í›„ ê´€ì°°",
          "ì‚¬ì§„ ì´¬ì˜ ì‹œ ì²œì²œíˆ ì ‘ê·¼"
        ]
      },
      {
        id: "butterfly-small-white",
        emoji: "ğŸ¦‹",
        nameKo: "ë°°ì¶”í°ë‚˜ë¹„",
        nameEn: "Small White",
        sci: "Pieris rapae",
        order: "ë‚˜ë¹„ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 50,
        habitat: ["ë†ê²½ì§€", "ì •ì›"],
        diet: ["í¡ë°€", "ì´ˆì‹"],
        season: "3â€“11ì›”",
        range: "í•œë°˜ë„ ì „ì—­",
        notes: "í° ë‚ ê°œ, ë°°ì¶”ê³¼ ì‘ë¬¼ê³¼ ì—°ê´€.",
        tags: ["í°ë‚˜ë¹„", "ë†ì‘ë¬¼"],
        tips: [
          "ë°­ ê°€ì¥ìë¦¬ ê½ƒì—ì„œ ê´€ì°°",
          "ìœ ì¶©ì€ ë°°ì¶”ê³¼ ìì—ì„œ ë°œê²¬"
        ]
      },
      {
        id: "corn-borer-moth",
        emoji: "ğŸ¦‹",
        nameKo: "ë²¼ë©¸êµ¬(ì˜ˆì‹œ: ì‹¤ì œëŠ” ë…¸ë¦°ì¬ëª© ê³¡ì‹í•´ì¶© ë“± ë‹¤ì–‘)",
        nameEn: "Rice pest example",
        sci: "Nilaparvata sp.",
        order: "ë§¤ë¯¸ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ë¶ˆì™„ì „ë³€íƒœ",
        sizeMm: 3,
        habitat: ["ë†ê²½ì§€"],
        diet: ["í¡ì¦™"],
        season: "6â€“10ì›”",
        range: "í•œë°˜ë„",
        notes: "ê³¡ì‹ í¡ì¦™, ëŒ€ëŸ‰ ë°œìƒ ì‹œ í”¼í•´.",
        tags: ["í•´ì¶©", "ë†ì—…"],
        tips: [
          "ë…¼ ê°€ì¥ìë¦¬ì—ì„œ ì§‘ë‹¨ ê´€ì°°",
          "ê¸°ìƒ ì¡°ê±´ì— ë”°ë¼ ê°œì²´êµ° ë³€í™”"
        ]
      },
      {
        id: "green-lacewing",
        emoji: "ğŸª¶",
        nameKo: "í’€ì ìë¦¬(ì˜ˆì‹œ)",
        nameEn: "Green Lacewing",
        sci: "Chrysopidae sp.",
        order: "ë±€ì ìë¦¬ëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 15,
        habitat: ["ì •ì›", "ë†ê²½ì§€"],
        diet: ["ìœ¡ì‹", "í¬ì‹ì„±"],
        season: "4â€“10ì›”",
        range: "í•œë°˜ë„",
        notes: "íˆ¬ëª…í•œ ë§ìƒ ë‚ ê°œ, ìœ ì¶©ì€ ì§„ë”§ë¬¼ í¬ì‹.",
        tags: ["ì²œì ", "ìƒë¬¼í•™ì ë°©ì œ"],
        tips: [
          "ì•¼ê°„ì— ë¶ˆë¹›ì— ìœ ì¸",
          "ë‚®ì—ëŠ” ì‹ìƒ ì†ì— ì •ì§€"
        ]
      },
      {
        id: "tiger-beetle",
        emoji: "ğŸ¯",
        nameKo: "ë²”ë‹¤ë¦¿ê¸¸ì•ì¡ì´(ì˜ˆì‹œ)",
        nameEn: "Tiger Beetle",
        sci: "Cicindelinae sp.",
        order: "ë”±ì •ë²Œë ˆëª©",
        status: "ê´€ì‹¬ëŒ€ìƒ",
        meta: "ì™„ì „ë³€íƒœ",
        sizeMm: 17,
        habitat: ["í•´ì•ˆ", "í•˜ì²œ", "ì´ˆì§€"],
        diet: ["ìœ¡ì‹", "í¬ì‹ì„±"],
        season: "4â€“9ì›”",
        range: "í•œë°˜ë„",
        notes: "ë¹ ë¥¸ ë‹¬ë¦¬ê¸°ì™€ í¬ì‹ì„±.",
        tags: ["ê¸¸ì•ì¡ì´", "í¬ì‹"],
        tips: [
          "í–‡ë¹› ì¢‹ì€ ëª¨ë˜ê¸¸ì—ì„œ ë¹ ë¥´ê²Œ ì´ë™",
          "ì ‘ê·¼ ì‹œ ì¦‰ì‹œ ë„ì£¼, ë©€ë¦¬ì„œ ê´€ì°°"
        ]
      }
    ];

    // ìƒíƒœ
    const state = {
      query: "",
      filters: {
        order: new Set(),
        habitat: new Set(),
        diet: new Set(),
        status: new Set(),
        meta: new Set(),
        sizeMin: 1,
        sizeMax: 120
      },
      sortBy: "name",
      liked: new Set(),
      indexLetter: null,
      theme: "auto"
    };

    // ìš”ì†Œ ì°¸ì¡°
    const el = {
      search: document.getElementById("search"),
      clearSearch: document.getElementById("clearSearch"),
      randomBtn: document.getElementById("randomBtn"),
      exportBtn: document.getElementById("exportBtn"),
      themeToggle: document.getElementById("themeToggle"),
      countChip: document.getElementById("countChip"),
      activeFiltersChip: document.getElementById("activeFiltersChip"),
      likedChip: document.getElementById("likedChip"),
      queryEcho: document.getElementById("queryEcho"),
      sortEcho: document.getElementById("sortEcho"),
      alphabetIndex: document.getElementById("alphabetIndex"),
      cardGrid: document.getElementById("cardGrid"),
      sizeMin: document.getElementById("sizeMin"),
      sizeMax: document.getElementById("sizeMax"),
      sizeMinLabel: document.getElementById("sizeMinLabel"),
      sizeMaxLabel: document.getElementById("sizeMaxLabel"),
      resetFilters: document.getElementById("resetFilters"),
      resultHint: document.getElementById("resultHint"),
      indexPrev: document.getElementById("indexPrev"),
      indexNext: document.getElementById("indexNext"),
      modalBackdrop: document.getElementById("modalBackdrop"),
      modalClose: document.getElementById("modalClose"),
      modalTitle: document.getElementById("modalTitle"),
      modalSubtitle: document.getElementById("modalSubtitle"),
      detailOrder: document.getElementById("detailOrder"),
      detailStatus: document.getElementById("detailStatus"),
      detailMeta: document.getElementById("detailMeta"),
      detailSize: document.getElementById("detailSize"),
      detailHabitat: document.getElementById("detailHabitat"),
      detailDiet: document.getElementById("detailDiet"),
      detailSeason: document.getElementById("detailSeason"),
      detailRange: document.getElementById("detailRange"),
      detailNotes: document.getElementById("detailNotes"),
      detailTags: document.getElementById("detailTags"),
      detailTips: document.getElementById("detailTips"),
      likeInModal: document.getElementById("likeInModal"),
      copyLinkBtn: document.getElementById("copyLinkBtn"),
      printBtn: document.getElementById("printBtn")
    };

    // ì ‘ê·¼ì„±: í‚¤ë³´ë“œ í¬ì»¤ìŠ¤ íŠ¸ë©
    let lastFocused;

    // ì´ˆê¸°í™”
    function init() {
      buildAlphabetIndex();
      bindFilterChips("filterOrder", "order");
      bindFilterChips("filterHabitat", "habitat");
      bindFilterChips("filterDiet", "diet");
      bindFilterChips("filterStatus", "status");
      bindFilterChips("filterMetamorphosis", "meta");
      bindSortChips();
      bindEvents();
      render();
    }

    function buildAlphabetIndex() {
      const letters = [...new Set(INSECTS.map(x => x.nameKo[0]))].sort();
      letters.forEach(L => {
        const btn = document.createElement("button");
        btn.className = "chip";
        btn.textContent = L;
        btn.setAttribute("data-letter", L);
        btn.addEventListener("click", () => {
          if (state.indexLetter === L) {
            state.indexLetter = null;
            btn.classList.remove("active");
          } else {
            state.indexLetter = L;
            [...el.alphabetIndex.children].forEach(c => c.classList.remove("active"));
            btn.classList.add("active");
          }
          render();
        });
        el.alphabetIndex.appendChild(btn);
      });
    }

    function bindFilterChips(containerId, key) {
      const container = document.getElementById(containerId);
      container.querySelectorAll(".chip").forEach(chip => {
        chip.addEventListener("click", () => {
          const val = chip.dataset[`filter${key[0].toUpperCase() + key.slice(1)}`] || chip.textContent;
          const set = state.filters[key];
          if (set.has(val)) set.delete(val); else set.add(val);
          chip.classList.toggle("active");
          render();
        });
      });
    }

    function bindSortChips() {
      document.querySelectorAll("[data-sort]").forEach(chip => {
        chip.addEventListener("click", () => {
          document.querySelectorAll("[data-sort]").forEach(c => c.classList.remove("active"));
          chip.classList.add("active");
          state.sortBy = chip.dataset.sort;
          el.sortEcho.textContent = ({ name: "ì´ë¦„", size: "ëª¸ê¸¸ì´", order: "ë¶„ë¥˜(ëª©)", status: "ë³´ì „ ìƒíƒœ" })[state.sortBy] || state.sortBy;
          render();
        });
      });
      // ê¸°ë³¸ í™œì„±í™”
      document.querySelector("[data-sort='name']").classList.add("active");
    }

    function bindEvents() {
      el.search.addEventListener("input", () => {
        state.query = el.search.value.trim();
        el.queryEcho.textContent = state.query || "ì—†ìŒ";
        render();
      });
      el.clearSearch.addEventListener("click", () => {
        el.search.value = "";
        state.query = "";
        el.queryEcho.textContent = "ì—†ìŒ";
        render();
      });

      const clampSize = () => {
        state.filters.sizeMin = Number(el.sizeMin.value);
        state.filters.sizeMax = Number(el.sizeMax.value);
        if (state.filters.sizeMin > state.filters.sizeMax) {
          state.filters.sizeMax = state.filters.sizeMin;
          el.sizeMax.value = state.filters.sizeMax;
        }
        el.sizeMinLabel.textContent = `ìµœì†Œ: ${state.filters.sizeMin}`;
        el.sizeMaxLabel.textContent = `ìµœëŒ€: ${state.filters.sizeMax}`;
        render();
      };
      el.sizeMin.addEventListener("input", clampSize);
      el.sizeMax.addEventListener("input", clampSize);

      el.resetFilters.addEventListener("click", () => {
        ["filterOrder","filterHabitat","filterDiet","filterStatus","filterMetamorphosis"].forEach(id => {
          document.getElementById(id).querySelectorAll(".chip.active").forEach(c => c.classList.remove("active"));
        });
        state.filters.order.clear();
        state.filters.habitat.clear();
        state.filters.diet.clear();
        state.filters.status.clear();
        state.filters.meta.clear();
        state.indexLetter = null;
        el.alphabetIndex.querySelectorAll(".chip.active").forEach(c => c.classList.remove("active"));
        el.sizeMin.value = 1;
        el.sizeMax.value = 120;
        state.filters.sizeMin = 1;
        state.filters.sizeMax = 120;
        el.sizeMinLabel.textContent = "ìµœì†Œ: 1";
        el.sizeMaxLabel.textContent = "ìµœëŒ€: 120";
        render();
      });

      el.indexPrev.addEventListener("click", () => cycleIndex(-1));
      el.indexNext.addEventListener("click", () => cycleIndex(1));

      el.randomBtn.addEventListener("click", () => {
        const list = applyAllFilters(INSECTS);
        if (!list.length) return;
        const pick = list[Math.floor(Math.random() * list.length)];
        openModal(pick);
      });

      el.exportBtn.addEventListener("click", () => {
        const list = applyAllFilters(INSECTS);
        const blob = new Blob([JSON.stringify(list, null, 2)], { type: "application/json" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url; a.download = "insects-export.json";
        document.body.appendChild(a);
        a.click();
        setTimeout(() => { URL.revokeObjectURL(url); a.remove(); }, 500);
      });

      // Theme toggle
      const root = document.documentElement;
      el.themeToggle.addEventListener("click", toggleTheme);
      el.themeToggle.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") { e.preventDefault(); toggleTheme(); }
      });

      // Modal close
      el.modalClose.addEventListener("click", closeModal);
      el.modalBackdrop.addEventListener("click", (e) => {
        if (e.target === el.modalBackdrop) closeModal();
      });

      el.copyLinkBtn.addEventListener("click", () => {
        const id = el.modalBackdrop.dataset.currentId;
        if (!id) return;
        const url = new URL(window.location);
        url.hash = `#${id}`;
        navigator.clipboard?.writeText(url.toString());
      });

      el.printBtn.addEventListener("click", () => window.print());
      el.likeInModal.addEventListener("click", () => {
        const id = el.modalBackdrop.dataset.currentId;
        if (!id) return;
        toggleLike(id);
      });

      // Deep-link support
      window.addEventListener("hashchange", () => {
        const id = location.hash.replace("#", "");
        const found = INSECTS.find(x => x.id === id);
        if (found) openModal(found);
      });
      // Open if hash exists
      const initialId = location.hash.replace("#", "");
      const foundInit = INSECTS.find(x => x.id === initialId);
      if (foundInit) openModal(foundInit);
    }

    function toggleTheme() {
      if (state.theme === "auto") {
        state.theme = "dark";
        document.body.dataset.theme = "dark";
        el.themeToggle.setAttribute("aria-checked", "true");
      } else if (state.theme === "dark") {
        state.theme = "light";
        document.body.dataset.theme = "light";
        el.themeToggle.setAttribute("aria-checked", "false");
      } else {
        state.theme = "auto";
        delete document.body.dataset.theme;
        el.themeToggle.setAttribute("aria-checked", "false");
      }
    }

    function cycleIndex(dir) {
      const letters = [...el.alphabetIndex.children].map(b => b.getAttribute("data-letter"));
      if (!letters.length) return;
      if (state.indexLetter == null) {
        state.indexLetter = letters[0];
      } else {
        const i = letters.indexOf(state.indexLetter);
        let ni = i + dir;
        if (ni < 0) ni = letters.length - 1;
        if (ni >= letters.length) ni = 0;
        state.indexLetter = letters[ni];
      }
      [...el.alphabetIndex.children].forEach(c => {
        c.classList.toggle("active", c.getAttribute("data-letter") === state.indexLetter);
      });
      render();
    }

    // í•„í„° ì ìš©
    function applyAllFilters(list) {
      const q = state.query.toLowerCase();
      const f = state.filters;
      const byQuery = (x) => {
        if (!q) return true;
        const hay = [
          x.nameKo, x.nameEn, x.sci, x.order,
          x.notes, ...x.tags, ...x.habitat, ...x.diet, x.status, x.meta
        ].join(" ").toLowerCase();
        return hay.includes(q);
      };
      const byOrder = (x) => f.order.size ? f.order.has(x.order) : true;
      const byHabitat = (x) => f.habitat.size ? x.habitat.some(h => f.habitat.has(h)) : true;
      const byDiet = (x) => f.diet.size ? x.diet.some(d => f.diet.has(d)) : true;
      const byStatus = (x) => f.status.size ? f.status.has(x.status) : true;
      const byMeta = (x) => f.meta.size ? f.meta.has(x.meta) : true;
      const bySize = (x) => (x.sizeMm >= f.sizeMin && x.sizeMm <= f.sizeMax);
      const byIndex = (x) => state.indexLetter ? x.nameKo.startsWith(state.indexLetter) : true;

      return list.filter(x =>
        byQuery(x) && byOrder(x) && byHabitat(x) &&
        byDiet(x) && byStatus(x) && byMeta(x) &&
        bySize(x) && byIndex(x)
      );
    }

    // ì •ë ¬
    function sortList(list) {
      const cmp = {
        name: (a, b) => a.nameKo.localeCompare(b.nameKo, "ko"),
        size: (a, b) => a.sizeMm - b.sizeMm,
        order: (a, b) => a.order.localeCompare(b.order, "ko"),
        status: (a, b) => a.status.localeCompare(b.status, "ko")
      }[state.sortBy] || ((a, b) => a.nameKo.localeCompare(b.nameKo, "ko"));
      return [...list].sort(cmp);
    }

    // ë Œë”ë§
    function render() {
      const filtered = sortList(applyAllFilters(INSECTS));
      el.countChip.textContent = `ì´ ${filtered.length}ì¢…`;
      const activeCount =
        state.filters.order.size +
        state.filters.habitat.size +
        state.filters.diet.size +
        state.filters.status.size +
        state.filters.meta.size +
        (state.filters.sizeMin !== 1 || state.filters.sizeMax !== 120 ? 1 : 0) +
        (state.indexLetter ? 1 : 0) +
        (state.query ? 1 : 0);
      el.activeFiltersChip.textContent = `í™œì„± í•„í„° ${activeCount}ê°œ`;
      el.likedChip.textContent = `ì¦ê²¨ì°¾ê¸° ${state.liked.size}ê°œ`;
      el.resultHint.textContent = filtered.length ? "í•„í„°ì— ë§ëŠ” ê³¤ì¶©ì´ í‘œì‹œë©ë‹ˆë‹¤." : "ì¡°ê±´ì— ë§ëŠ” ê³¤ì¶©ì´ ì—†ìŠµë‹ˆë‹¤. í•„í„°ë¥¼ ì™„í™”í•´ë³´ì„¸ìš”.";

      el.cardGrid.innerHTML = "";
      filtered.forEach(x => el.cardGrid.appendChild(cardOf(x)));
    }

    function cardOf(x) {
      const card = document.createElement("article");
      card.className = "card";
      card.setAttribute("data-id", x.id);
      card.setAttribute("aria-label", `${x.nameKo} ì¹´ë“œ`);

      // Header
      const header = document.createElement("div");
      header.className = "card-header";
      const emoji = document.createElement("div");
      emoji.className = "emoji";
      emoji.textContent = x.emoji;

      const title = document.createElement("div");
      title.className = "title";
      const h3 = document.createElement("h3");
      h3.textContent = x.nameKo;
      const sm = document.createElement("small");
      sm.textContent = `${x.nameEn} Â· ${x.sci}`;
      sm.className = "small-muted";
      title.append(h3, sm);

      const status = document.createElement("span");
      status.className = "status " + (x.status === "ìœ„ê¸°" ? "danger" : x.status === "ì¤€ìœ„í˜‘" || x.status === "ì·¨ì•½" ? "warn" : "ok");
      status.textContent = x.status;

      header.append(emoji, title, status);

      // Body
      const body = document.createElement("div");
      body.className = "card-body";
      const meta = document.createElement("div");
      meta.className = "meta";

      const m1 = metaItem("ë¶„ë¥˜(ëª©)", x.order);
      const m2 = metaItem("ë³€íƒœ ìœ í˜•", x.meta);
      const m3 = metaItem("ëª¸ê¸¸ì´", `${x.sizeMm} mm`);
      const m4 = metaItem("ì„œì‹ì§€", x.habitat.join(", "));
      meta.append(m1, m2, m3, m4);

      const tags = document.createElement("div");
      tags.className = "tags";
      x.tags.forEach(t => tags.appendChild(tagOf(t)));

      body.append(meta, tags);

      // Footer
      const footer = document.createElement("div");
      footer.className = "card-footer";
      const actions = document.createElement("div");
      actions.className = "actions";
      const more = document.createElement("button");
      more.className = "btn";
      more.textContent = "ğŸ” ìì„¸íˆ";
      more.addEventListener("click", () => openModal(x));

      const like = document.createElement("button");
      like.className = "btn like-btn";
      like.textContent = state.liked.has(x.id) ? "â¤ï¸ ì¦ê²¨ì°¾ê¸° í•´ì œ" : "ğŸ¤ ì¦ê²¨ì°¾ê¸°";
      like.setAttribute("data-liked", state.liked.has(x.id));
      like.addEventListener("click", () => toggleLike(x.id));

      actions.append(more, like);

      const info = document.createElement("div");
      info.className = "small-muted";
      info.textContent = `í™œë™ ì‹œê¸°: ${x.season} Â· ë¶„í¬: ${x.range}`;

      footer.append(actions, info);

      card.append(header, body, footer);
      return card;
    }

    function metaItem(label, value) {
      const d = document.createElement("div");
      d.className = "meta-item";
      const b = document.createElement("b"); b.textContent = label;
      const s = document.createElement("span"); s.textContent = value;
      d.append(b, s);
      return d;
    }

    function tagOf(t) {
      const span = document.createElement("span");
      span.className = "tag";
      span.textContent = t;
      return span;
    }

    function toggleLike(id) {
      if (state.liked.has(id)) state.liked.delete(id); else state.liked.add(id);
      el.likedChip.textContent = `ì¦ê²¨ì°¾ê¸° ${state.liked.size}ê°œ`;
      // ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
      document.querySelectorAll(`.card[data-id="${id}"] .like-btn`).forEach(btn => {
        const liked = state.liked.has(id);
        btn.textContent = liked ? "â¤ï¸ ì¦ê²¨ì°¾ê¸° í•´ì œ" : "ğŸ¤ ì¦ê²¨ì°¾ê¸°";
        btn.setAttribute("data-liked", liked);
      });
      // ëª¨ë‹¬ ë²„íŠ¼ë„ ë™ê¸°í™”
      const liked = state.liked.has(id);
      el.likeInModal.textContent = liked ? "â¤ï¸ ì¦ê²¨ì°¾ê¸° í•´ì œ" : "ğŸ¤ ì¦ê²¨ì°¾ê¸°";
    }

    function openModal(x) {
      lastFocused = document.activeElement;
      el.modalBackdrop.style.display = "flex";
      el.modalBackdrop.setAttribute("aria-hidden", "false");
      el.modalBackdrop.dataset.currentId = x.id;

      el.modalTitle.textContent = x.nameKo;
      el.modalSubtitle.textContent = `${x.nameEn} Â· ${x.sci}`;
      el.detailOrder.textContent = x.order;
      el.detailStatus.innerHTML = toStatusPill(x.status);
      el.detailMeta.textContent = x.meta;
      el.detailSize.textContent = `${x.sizeMm} mm`;
      el.detailHabitat.textContent = x.habitat.join(", ");
      el.detailDiet.textContent = x.diet.join(", ");
      el.detailSeason.textContent = x.season;
      el.detailRange.textContent = x.range;
      el.detailNotes.textContent = x.notes;
      el.detailTags.innerHTML = "";
      x.tags.forEach(t => el.detailTags.appendChild(tagOf(t)));
      el.detailTips.innerHTML = "";
      x.tips?.forEach(t => {
        const li = document.createElement("li"); li.textContent = t;
        el.detailTips.appendChild(li);
      });
      const liked = state.liked.has(x.id);
      el.likeInModal.textContent = liked ? "â¤ï¸ ì¦ê²¨ì°¾ê¸° í•´ì œ" : "ğŸ¤ ì¦ê²¨ì°¾ê¸°";

      // í¬ì»¤ìŠ¤ ì´ë™
      el.modalClose.focus();
      document.addEventListener("keydown", escClose);
    }

    function closeModal() {
      el.modalBackdrop.style.display = "none";
      el.modalBackdrop.setAttribute("aria-hidden", "true");
      document.removeEventListener("keydown", escClose);
      if (lastFocused) lastFocused.focus();
    }

    function escClose(e) {
      if (e.key === "Escape") closeModal();
    }

    function toStatusPill(s) {
      const cls = s === "ìœ„ê¸°" ? "red" : (s === "ì·¨ì•½" || s === "ì¤€ìœ„í˜‘") ? "orange" : "green";
      return `<span class="pill ${cls}">${s}</span>`;
    }

    // ì‹œì‘
    init();
  </script>
</body>
</html>
